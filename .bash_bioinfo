#!/usr/local/bin/bash

# Dependencies
# - samtools

dim() {
	ROW=$( more ${1} | wc -l )
	COLUMN=$( awk '{print NF}' ${1} | sort -nu | tail -n 1 )
	echo -e "${ROW}\t${COLUMN}"
}

# FASTA description : sequence ID + sequence length
fadesc () {
	samtools faidx ${1}
	cat "${1}.fai" | cut -f1,2
	rm "${1}.fai"
}

# Extract sequences from FASTA
faget (){
	FASTA=${1}
	SEQIDS=${2}
	if [[ ${FASTA} == "" || $SEQIDS == "" ]] ; then
		echo "Usage : faget FASTA_FILE SEQID_LIST"
	else
		if [[ ! -e "${1}.fai" ]] ; then samtools faidx ${1} ; fi
		xargs samtools faidx ${1} < ${2}
	fi
}

gff (){
	cat <<EOF

Column 1: "seqid"
Column 2: "source"
Column 3: "type"
Column 4: "start"
Column 5: "end"
Column 6: "score"
Column 7: "strand"
Column 8: "phase"
Column 9: "attributes"

More info at https://github.com/The-Sequence-Ontology/Specifications/blob/master/gff3.md

EOF
}

new_script (){

	usage (){
cat <<EOF
	Usage : new_script LANGUAGE SCRIPT_NAME
		- LANGUAGE can be bash or perl

	Example : new_script bash script.sh
EOF
	}

	LANGUAGE=${1}
	SCRIPT_NAME=${2}
	if [[ ${LANGUAGE} == "" || ${SCRIPT_NAME} == "" ]] ; then
		usage
		exit 1
	fi

	if [[ ${LANGUAGE} == "bash" ]] ; then
		wget -O ${SCRIPT_NAME} https://raw.githubusercontent.com/thbtmntgn/script_templates/master/bash_script_template.sh
	elif [[ ${LANGUAGE} == "perl" ]] ; then
		wget -O ${SCRIPT_NAME} https://raw.githubusercontent.com/thbtmntgn/script_templates/master/perl_script_template.pl
	else
		usage
		exit 1
	fi
}
